extends layout.pug

block content
    div
        h1=story.title
        h2=story.author.fullName
        h3=story.createdAt.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })
        a(href=`/stories/${story.id}/edit`) Edit
        a(href=`/stories/${story.id}/delete`) Delete
        img(src=`${story.imgUrl}`)
        p=story.content
    div
    form(action=`/likes` method='post')
        input(type="hidden" name="_csrf" value=csrfToken)
        input(type="hidden" name='storyId' value=storyId)
        label Likes:
            span(class="likes-number")= likes
        div
        button(type="submit" class="like-button") Like this story
    script(src="/javascripts/likeAddDelete.js" type="module" defer)
    div
    form(action=`/comments` method='post')
        input(type="hidden" name="_csrf" value=csrfToken)
        input(type="hidden" name='storyId' value=storyId)
        label Comments
        input(type="text" name='content')
        button(type='button') Cancel
        button(type='submit') Create
    each comment in story.Comments
        div(id=`comments-container-${comment.id}`)
            p(id=`comments-author-${comment.id}`)=comment.User.fullName
            p(id=`comments-content-${comment.id}`)=comment.content
